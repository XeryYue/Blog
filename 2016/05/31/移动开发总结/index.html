<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
    

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.4"/>


    <meta name="description" content="广东工业大学14级网络工程张翔" />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.4" />


<meta name="description" content="参与了几个移动端的 web 开发，在团队合作中与在开发中，踩了一些移动开发的坑，希望这篇博文可以让移动开发人员在开发 web 时有所启发，同时组内师弟师妹在做项目时避免类似的坑。">
<meta property="og:type" content="article">
<meta property="og:title" content="移动开发总结">
<meta property="og:url" content="http://zhangxiang958.github.io/2016/05/31/移动开发总结/index.html">
<meta property="og:site_name" content="JARVIS's blog">
<meta property="og:description" content="参与了几个移动端的 web 开发，在团队合作中与在开发中，踩了一些移动开发的坑，希望这篇博文可以让移动开发人员在开发 web 时有所启发，同时组内师弟师妹在做项目时避免类似的坑。">
<meta property="og:image" content="http://f2e.souche.com/assets/postImg/flexiable/feel.png">
<meta property="og:updated_time" content="2016-05-31T13:37:21.724Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="移动开发总结">
<meta name="twitter:description" content="参与了几个移动端的 web 开发，在团队合作中与在开发中，踩了一些移动开发的坑，希望这篇博文可以让移动开发人员在开发 web 时有所启发，同时组内师弟师妹在做项目时避免类似的坑。">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'always'
  };
</script>

    <title> 移动开发总结 // JARVIS's blog </title>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->




<div class="container one-column page-post-detail">
    <div class="headband"></div>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">JARVIS's blog</span>
  </a>


</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
    <span class="logo-line-after"><i></i></span>

</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-tags"></i> <br />
            标签
          </a>
        </li>
      
    </ul>
  

  
</nav>


        </div>
    </header>

    <main id="main" class="main">
        <div class="main-inner">
            <div id="content" class="content">
                

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              移动开发总结
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2016-05-31T21:36:24+08:00" content="2016-05-31">
            2016-05-31
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分类于
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/移动开发/" itemprop="url" rel="index"><span itemprop="name">移动开发</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/05/31/移动开发总结/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/31/移动开发总结/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><p>参与了几个移动端的 web 开发，在团队合作中与在开发中，踩了一些移动开发的坑，希望这篇博文可以让移动开发人员<br>在开发 web 时有所启发，同时组内师弟师妹在做项目时避免类似的坑。<br><a id="more"></a></p>
<h2 id="切图">切图</h2><p>问过在网易实习的师兄师姐，在页面重构时候一般需要自己切图与开发一手完成，但是怎样才能快速地切出自己想要的<br>图呢？这里推荐一个插件 <a href="http://www.cutterman.cn/v2/parker" target="_blank" rel="external">CutterMan</a> 。可以帮助你快速切图，并切好两倍三倍图。</p>
<h2 id="我对像素的一些理解">我对像素的一些理解</h2><p>其实像素分为两种，一种是 CSS 像素，它是 WEB 开发人员抽象出来的一种概念，另外一种是设备像素，它是设备的物理<br>像素，只有当 dpr（设备像素/css 像素）等于 1 的时候，两者才相等。那么到底为什么图片在高清屏幕上会模糊呢？<br>原因在于在高清屏幕上，物理像素更多，一个 CSS 像素有多个物理像素来表示，而一个 CSS 像素用一个物理像素表示<br>才会高清，现在多个物理像素，计算机只好就近取色来填充 “多余” 的物理像素，导致相片模糊。<br>下图是同样是 1px 在不同的屏幕下的表示。<br><img src="http://f2e.souche.com/assets/postImg/flexiable/feel.png" alt=""><br>[图片来自 <strong><a href="http://caibaojian.com/" target="_blank" rel="external">http://caibaojian.com/</a></strong>.]</p>
<h2 id="Viewport">Viewport</h2><p>viewport 是由苹果开发出来的，目的就是为了适配移动端页面。这是因为苹果开发出 retina 屏幕，屏幕大小不变而像<br>素增加一倍，与过去的网页不能平稳过度，因为原来 960 px 的网页导航栏为 60%，解析出来就是 576 px，但是遇到了<br>320 px 的手机屏幕，解析成了162 px，但是字体设置又用了 px，那么字体就无法友好显示了，所以开发出 viewport，<br>分为两个 visual viewport 和 layout viewport。<br>layout viewport 是由浏览器厂商规定的，一般是 980 px，现在有了layout viewport，页面在手机上就像在 980 px 的屏幕上显示一样，手机可以通过滚动条来看网页，但是如果我们需要网页去除滚动条满屏显示（320 px），那么因为 layout viewport 是 980 px，这样的网页因为缩放，看起来非常小，所以才有了后来的 width=device-width 这个值。</p>
<h2 id="自适应">自适应</h2><p>自适应是移动开发最注意的点之一，为了良好的用户体验，下面的三种方法都有各自的使用场景。一般来说自适应需要<br>关注三个点：字体、高宽统一、图像。</p>
<h3 id="高度一定，宽度自适应">高度一定，宽度自适应</h3><p>这个方法其实体验很好，自动填充空白。但是有几个点需要注意，这是一个适应窄宽度的布局，但是在屏幕变宽的时候，<br>却需要比较大的图像才会不至于拉伸模糊，这一点比较矛盾。像手机新浪采用的方法就是高度固定，宽度使用百分比的<br>自适应布局方案。<a href="http://sina.cn/" target="_blank" rel="external">手机新浪</a>就是采用了这种方法。</p>
<h3 id="固定宽度，viewport_缩放">固定宽度，viewport 缩放</h3><p>这个可以完全按照设计稿，使用 px，em，PC 端即可完成大部分测试，手机端考虑对齐问题。在实践上，设计稿，页面<br>宽度， viewport 值采用同一宽度值，但是一般来说，这个并不是最优解决方案，因为一般来说移动端都需要适应大屏<br>手机与小屏手机。</p>
<h3 id="利用rem布局">利用rem布局</h3><p>使用 rem 是让那些页面中需要弹性变化的元素进行布局。根据自身的项目经验，rem 确实方便快速。<br><a href="http://info.3g.qq.com/g/s?aid=index&amp;g_ut=3&amp;g_f=1283" target="_blank" rel="external">手机腾讯网</a>就是采用了这种方式，对于需要弹性变化的元素都采用 rem 进行布局。<br><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var dpr, <span class="comment">rem, scale;</span></span><br><span class="line">var doc = document;</span><br><span class="line">var docEl = doc.documentElement;</span><br><span class="line">var meta = doc.querySelector('meta[name="viewport"]');</span><br><span class="line"></span><br><span class="line">dpr = window.devicePixelRatio || <span class="number">1</span>;</span><br><span class="line"><span class="comment">rem = docEl.clientWidth * dpr /10;</span></span><br><span class="line">scale = <span class="number">1</span> /dpr;     //scale 与 dpr 的关系的倒数</span><br><span class="line"></span><br><span class="line">//设置 viewport，根据 scale 进行缩放，达到高清</span><br><span class="line">meta.setAttribute('content', 'width=' + dpr * docEl.clientWidth + ',inital-scale='+ scale + ',maximum-scale=' + scale + ', minimum-scale=' + scale + ',user-scalable=no');</span><br><span class="line"></span><br><span class="line">//设置 data-dpr 属性，留做设置字体用</span><br><span class="line">docEl.setArribute('data-dpr', dpr);</span><br><span class="line">//设置根元素的字体大小</span><br><span class="line">docEl.style = 'font-size='+ <span class="comment">rem + 'px';</span></span><br></pre></td></tr></table></figure></p>
<p>但是缺点是设计稿中的 px 与开发中的 rem 的换算比较困难，这里我在项目中使用的是 cssrem 这个插件，可以帮助<br>换算他们的值。<br>最后，其实代码中的 scale 是用于解决 border：1px 问题的，因为 2 倍稿中的 1px 相当于 1倍稿中的 0.5 px，<br>我们为了解决这个问题，可以使用 js 动态设置 scale 来达到目的，如果你不想使用 js ，那么可以使用 CSS hack。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">transform</span><span class="value">: <span class="function">scaleX</span>(<span class="number">0.5</span>);</span> <span class="comment">//画出 2 倍稿中的 1px，即 1 倍稿中的 0.5 px。</span></span><br></pre></td></tr></table></figure></p>
<p>有人会有疑问，如果设置了 scale ，那么字体大小页面布局不也就变化了吗？是的没错，所以上面的 rem 布局可以解决<br>这个问题，因为如果布局使用的是 px 做单位，的确会有影响，但是使用 rem 就不会，布局只会与根元素的 font-size<br>有关，同时字体使用 css media 与根元素的 data-dpr 来设置，就没有问题了。</p>
<h3 id="总结">总结</h3><p>在移动端开发，总的来说还是要按照设计稿的要求采取不同的解决方案。下面的这个 <em>meta</em> 标签是移动开发必备，<br>不管你有没有理解 <em>ppi，dpr</em> 等知识，它可以让你忽略设备的干扰，直接开发。<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="variable">name=</span><span class="string">"viewport"</span> <span class="variable">content=</span><span class="string">"width=device-width,user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>以上说的三种方法都是在 viewport 的基础上，为了页面的元素的宽度适应屏幕而做出的方案。</p>
<h2 id="图片">图片</h2><p>因为位图有可能会被拉伸（PPI的问题），所以我们得使用高清图。问题是需要多高清？一般有两种做法：</p>
<ol>
<li>准备 1/2/3 倍图。</li>
<li>放弃 1 屏机，全部使用 2 倍图。<br>两个方法来说，第一个方法比较繁琐，第二个方法的流量优化，滚动加载手段就会显得比较重要。<h2 id="字体">字体</h2>如果是使用 REM 布局，那么字体就应该使用 px 等单位。因为点阵字体一般是 14 或 16 这样的数字，但是如果使用<br>rem 单位，就会有可能会出现 13/15 这样怪异的尺寸，不利于字体渲染。但是遇到像标题这样需要大字号的可以使用<br>rem。在腾讯首页是几乎全部字体都使用了 rem 单位。<br>比较好的做法是根据 dpr 来设置字体:<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr_selector">[data-dpr=1]</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">16px</span></span></span>; </span><br><span class="line">&#125;</span></span><br><span class="line"><span class="attr_selector">[data-dpr=2]</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">32px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="附录：值得注意的点">附录：值得注意的点</h2><p>1.显示时候的地址栏的隐藏。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br></pre></td></tr></table></figure></p>
<p>2.打开软键盘：<br><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"tel"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>3.click事件有 300ms 的延迟，运用 <em>fastclick</em> ，还可以防止穿透。<br>4.在使用动画的时候，尽量使用 <em>transform： translate3d()</em> 可以开启硬件加速。<br>5.<em>weinre</em> 调试大法：移动端的调试困惑了我好久。<br>很多人推荐使用 <em>weinre</em>，我自己配合 <strong><em>UC</em> 二维码</strong> 浏览器插件使用。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> -g weinre</span><br><span class="line">weinre <span class="comment">--boundHost -all- --httpPort 8081</span></span><br><span class="line"></span><br><span class="line">打开 localhost:<span class="number">8081</span></span><br><span class="line"></span><br><span class="line">edpm <span class="keyword">start</span></span></span><br></pre></td></tr></table></figure></p>
<p>项目：<br><a href="https://github.com/zhangxiang958/Tour4U" target="_blank" rel="external">Tour4U</a><br><a href="https://github.com/zhangxiang958/zx2016" target="_blank" rel="external">2016 协同招新网页</a></p>
<p>参考资料：<br><a href="http://www.w3ctech.com/topic/979" target="_blank" rel="external">移动适配</a><br><a href="http://www.infoq.com/cn/articles/development-of-the-mobile-web-deep-concept" target="_blank" rel="external">移动开发</a><br><a href="http://sentsin.com/web/54.html" target="_blank" rel="external">移动开发的20个要点</a></p>
<p>传送门：<br><a href="https://github.com/jtyjty99999/mobileTech" target="_blank" rel="external">移动开发资源集合</a><br><a href="http://www.css88.com/archives/5480" target="_blank" rel="external">移动前端不得不了解的html5 head 头标签</a></p>
</span>
      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/07/18/浏览器从输入 URL 到页面显示的过程/" rel="prev">浏览器从输入 URL 到页面显示的过程</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/18/JavaScript 核心学习——继承/" rel="next">JavaScript 核心学习——继承</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/05/31/移动开发总结/"
     data-title="移动开发总结"
     data-content=""
     data-url="http://zhangxiang958.github.io/2016/05/31/移动开发总结/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


            </div>

            

            
              <div class="comments" id="comments">
                
                  <div class="ds-thread" data-thread-key="2016/05/31/移动开发总结/"
                       data-title="移动开发总结" data-url="http://zhangxiang958.github.io/2016/05/31/移动开发总结/">
                  </div>
                
              </div>
            
        </div>

        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://7xns9g.com1.z0.glb.clouddn.com/015630179.jpg" alt="JARVIS" itemprop="image"/>
          <p class="site-author-name" itemprop="name">JARVIS</p>
        </div>
        <p class="site-description motion-element" itemprop="description">广东工业大学14级网络工程张翔</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">26</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">10</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhangxiang958" target="_blank">github</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/zhang-xiang-78-5" target="_blank">zhihu</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="zxiang702" target="_blank">WeChat</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="958033967" target="_blank">QQ</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#切图"><span class="nav-number">1.</span> <span class="nav-text">切图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#我对像素的一些理解"><span class="nav-number">2.</span> <span class="nav-text">我对像素的一些理解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Viewport"><span class="nav-number">3.</span> <span class="nav-text">Viewport</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自适应"><span class="nav-number">4.</span> <span class="nav-text">自适应</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#高度一定，宽度自适应"><span class="nav-number">4.1.</span> <span class="nav-text">高度一定，宽度自适应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#固定宽度，viewport_缩放"><span class="nav-number">4.2.</span> <span class="nav-text">固定宽度，viewport 缩放</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#利用rem布局"><span class="nav-number">4.3.</span> <span class="nav-text">利用rem布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结"><span class="nav-number">4.4.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图片"><span class="nav-number">5.</span> <span class="nav-text">图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字体"><span class="nav-number">6.</span> <span class="nav-text">字体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#附录：值得注意的点"><span class="nav-number">7.</span> <span class="nav-text">附录：值得注意的点</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JARVIS</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


  <span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
</span>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

        </div>
    </footer>

    <div class="back-to-top"></div>
</div>

<script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhangxiang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.4"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.4"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.4" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>


  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.4" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



<script type="text/javascript">
    $(document).ready(function () {
        if (CONFIG.sidebar === 'always') {
            displaySidebar();
        }
    });
</script>








<!-- lazyload -->
<script type="text/javascript" src="/js/lazyload.js"></script>
<script type="text/javascript">
    jQuery(function () {
        jQuery("#posts img").lazyload({
            placeholder: "/images/loading.gif",
            effect: "fadeIn"
        });
    });
</script>
</body>
</html>
